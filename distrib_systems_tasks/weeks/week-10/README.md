# Упаковываем всё в Docker

## Задача
"У меня локально всё работает" — фраза, которую ненавидит любой сисадмин. Чтобы код работал везде одинаково, мы упаковываем его в контейнеры.
На этой неделе вам нужно написать правильный, оптимизированный `Dockerfile` для вашего сервиса.

## Ваш вариант
`variants/<GROUP>/<STUDENT_ID>/week-10.json`
Вам понадобится порт, который должен слушать ваш контейнер (например, 8000 или 5000).

## Что нужно сделать
1. **Написать Dockerfile**:
   - Используйте **Multi-stage build**. Это значит, что в одном образе (builder) вы устанавливаете зависимости и компилируете всё лишнее, а в финальный образ копируете только результат. Это уменьшает размер.
   - Правильно используйте кэш слоев: сначала копируйте `requirements.txt` и делайте `pip install`, и только потом копируйте остальной код. Так при изменении кода вам не придется заново качать библиотеки.
2. **Настроить .dockerignore**:
   - Исключите лишние файлы (`.git`, `__pycache__`, `.venv`, локальные тесты), чтобы они не раздували контекст сборки.
3. **Собрать и запустить**:
   - Соберите образ: `docker build -t week10-app .`
   - Запустите: `docker run -p <HOST_PORT>:<CONTAINER_PORT> week10-app`
   - Убедитесь, что приложение отвечает на запросы.
4. **Отчет**:
   - В файле `report.md` напишите, сколько весил исходный образ и сколько весит оптимизированный.

## Что сдавать
1. `Dockerfile`.
2. `.dockerignore`.
3. `report.md`.
4. Ответы на вопросы.

## Как проверить
```bash
make test WEEK=10
```
Тест попытается собрать ваш образ и проверить его структуру (наличие слоев, мультистейдж).
