# Когда одного ответа мало

## О чём речь
В REST (HTTP/1.1) на один запрос всегда приходит один ответ. Если вам нужно скачивать большой файл, вы ждете. Если вам нужны обновления данных, вы делаете polling (постоянно спрашиваете "есть что нового?").
В gRPC (поверх HTTP/2) соединение держится открытым.
- **Server Streaming**: Клиент сказал "дай данные", сервер начал лить поток сообщений (видео, логи, котировки).
- **Client Streaming**: Клиент льет поток данных (загрузка файла), сервер ждет конца и отвечает "ОК".
- **Bidirectional Streaming**: И клиент, и сервер шлют данные когда хотят (чат, онлайн-игра).

## Бенчмарки
Все говорят, что gRPC быстрее. Но "быстрее" — понятие растяжимое.
- **Latency** (Задержка): Сколько времени проходит от отправки запроса до получения первого байта ответа.
- **Throughput** (Пропускная способность): Сколько запросов в секунду (RPS) может переварить сервер.
gRPC выигрывает за счет бинарного формата (меньше парсить CPU) и мультиплексирования HTTP/2 (одно TCP соединение на все запросы). Но на простых JSON-ах разница может быть не такой драматичной, как на сложных структурах.

## Как мерить
Важно мерить честно.
- Использовать одну машину.
- Исключить сетевые задержки (localhost).
- Делать достаточно много повторений (warmup + measurement).
